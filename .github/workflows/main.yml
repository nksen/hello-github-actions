# @format

name: A workflow for my Hello World file
on:
  repository_dispatch:
    types: launch
jobs:
  prep:
    name: Hello world action
    runs-on: ubuntu-latest
    outputs:
      hotels_list: ${{ steps.get_hotels.outputs.hotels }}
    steps:
      - name: Get hotels list
        id: get_hotels
        run: echo "::set-output name=hotels::strawberry"

        #- run: curl -s -XGET 'http://3a3776fcc9d7.ngrok.io/admin/hotels' > /tmp/hotels.json && echo "::set-output name=HOTELS::{\"include\":[{\"project\":\"foo\",\"config\":\"Debug\"},{\"project\":\"bar\",\"config\":\"Release\"}]}";
        #- run: sed -i 's/"/\\"/g' /tmp/hotels.json
        #- run: cat /tmp/hotels.json
  build:
    needs: prep
    runs-on: ubuntu-latest
    env:
      TESTING: ${{ needs.prep.outputs.hotels_list }}
    #strategy:
    #  matrix:
    #    hotelInfo: ${{fromJSON(needs.prep.outputs.HOTELS)}}
    steps:
      - run: echo "$TESTING"
      - run: env
